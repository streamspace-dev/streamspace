# StreamSpace Docker Agent - Environment Configuration
#
# This file contains environment variables for docker-agent systemd service.
#
# Installation:
#   sudo cp docker-agent.env.example /etc/streamspace/docker-agent.env
#   sudo chmod 600 /etc/streamspace/docker-agent.env
#   sudo vi /etc/streamspace/docker-agent.env  # Edit configuration
#   sudo systemctl restart docker-agent

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Agent ID (unique identifier for this agent)
# Example: docker-prod-us-east-1, docker-staging-eu-west-1
AGENT_ID=docker-agent-1

# Control Plane WebSocket URL
# Example: wss://control.example.com, ws://localhost:8000
CONTROL_PLANE_URL=ws://localhost:8000

# ============================================================================
# AGENT IDENTITY
# ============================================================================

# Platform type (default: docker)
PLATFORM=docker

# Deployment region (optional)
# Example: us-east-1, eu-west-1, ap-southeast-1
REGION=us-east-1

# ============================================================================
# DOCKER CONFIGURATION
# ============================================================================

# Docker daemon socket
# Default: unix:///var/run/docker.sock
DOCKER_HOST=unix:///var/run/docker.sock

# Docker network name for sessions
# Default: streamspace
NETWORK_NAME=streamspace

# Docker volume driver
# Default: local
VOLUME_DRIVER=local

# ============================================================================
# CAPACITY LIMITS
# ============================================================================

# Maximum CPU cores available
MAX_CPU=100

# Maximum memory in GB
MAX_MEMORY=128

# Maximum concurrent sessions
MAX_SESSIONS=100

# ============================================================================
# HEALTH CHECK SETTINGS
# ============================================================================

# Heartbeat interval (supports duration strings: 30s, 1m, etc.)
HEALTH_CHECK_INTERVAL=30s

# ============================================================================
# HIGH AVAILABILITY (HA MODE)
# ============================================================================

# Enable HA mode with leader election
# Options: true, false
# Default: false
ENABLE_HA=false

# Leader election backend
# Options: file, redis, swarm
# Default: file
LEADER_ELECTION_BACKEND=file

# ============================================================================
# FILE BACKEND CONFIGURATION (for LEADER_ELECTION_BACKEND=file)
# ============================================================================

# Lock file path for file backend
# Default: /var/run/streamspace/docker-agent-{AGENT_ID}.lock
# Optional: Override default path
#LOCK_FILE_PATH=/var/run/streamspace/docker-agent-custom.lock

# ============================================================================
# REDIS BACKEND CONFIGURATION (for LEADER_ELECTION_BACKEND=redis)
# ============================================================================

# Redis connection URL for leader election
# Format: redis://[user:password@]host:port/db
# Example: redis://localhost:6379/0, redis://user:pass@redis.example.com:6379/1
#REDIS_URL=redis://localhost:6379/0

# ============================================================================
# SWARM BACKEND CONFIGURATION (for LEADER_ELECTION_BACKEND=swarm)
# ============================================================================

# No additional configuration required for Swarm backend
# Requires: Docker Swarm mode enabled, agent running as Swarm service

# ============================================================================
# EXAMPLE CONFIGURATIONS
# ============================================================================

# Example 1: Standalone mode (no HA)
# ENABLE_HA=false

# Example 2: HA mode with file backend (single host, multiple processes)
# ENABLE_HA=true
# LEADER_ELECTION_BACKEND=file
# LOCK_FILE_PATH=/var/run/streamspace/docker-agent-prod.lock

# Example 3: HA mode with Redis backend (multi-host)
# ENABLE_HA=true
# LEADER_ELECTION_BACKEND=redis
# REDIS_URL=redis://redis.example.com:6379/0

# Example 4: HA mode with Swarm backend (Docker Swarm)
# ENABLE_HA=true
# LEADER_ELECTION_BACKEND=swarm
