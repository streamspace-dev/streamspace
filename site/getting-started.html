<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Get started with StreamSpace - Installation guide, prerequisites, and first session tutorial.">
  <title>Getting Started - StreamSpace</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <nav>
      <a href="index.html" class="logo">
        <div class="logo-icon">ðŸš€</div>
        <span>StreamSpace</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="features.html">Features</a></li>
        <li><a href="docs.html">Docs</a></li>
        <li><a href="plugins.html">Plugins</a></li>
        <li><a href="getting-started.html">Get Started</a></li>
      </ul>
      <a href="https://github.com/streamspace-dev/streamspace" class="cta-button">GitHub</a>
      <button class="menu-toggle"><span></span><span></span><span></span></button>
    </nav>
  </header>

  <div class="doc-layout">
    <aside class="doc-sidebar">
      <h3>Contents</h3>
      <ul>
        <li><a href="#prerequisites">Prerequisites</a></li>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#verify">Verify Deployment</a></li>
        <li><a href="#first-session">First Session</a></li>
        <li><a href="#configuration">Configuration</a></li>
        <li><a href="#next-steps">Next Steps</a></li>
      </ul>
    </aside>

    <main class="doc-content">
      <h1>Getting Started with v2.0-beta</h1>
      <p>This guide will help you install StreamSpace v2.0-beta (Control Plane + K8s Agent) and create your first session.</p>

      <div class="alert" style="background: rgba(79, 70, 229, 0.1); border-left: 4px solid #4f46e5; padding: 1rem; margin: 2rem 0;">
        <strong>v2.0-beta Architecture:</strong> StreamSpace now uses a Control Plane + Agent model. The Control Plane (API/UI) manages agents via WebSocket, and the K8s Agent deploys sessions to your Kubernetes cluster.
      </div>

      <h2 id="prerequisites">Prerequisites</h2>
      <ul>
        <li><strong>Kubernetes 1.19+</strong> - Any Kubernetes cluster (k3s recommended)</li>
        <li><strong>Helm 3.x</strong> - For installation</li>
        <li><strong>NFS Storage</strong> - For persistent user home directories (ReadWriteMany)</li>
        <li><strong>Ingress Controller</strong> - Traefik, nginx, or similar with TLS support</li>
        <li><strong>kubectl</strong> - Configured to access your cluster</li>
        <li><strong>PostgreSQL</strong> - Database for Control Plane (can be deployed via Helm)</li>
      </ul>

      <h2 id="installation">Installation</h2>

      <h3>Step 1: Clone the Repository</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>git clone https://github.com/streamspace-dev/streamspace.git
cd streamspace</code></pre>
      </div>

      <h3>Step 2: Install Control Plane</h3>
      <p>Deploy the Control Plane (API + Web UI + PostgreSQL):</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>helm install streamspace ./chart \\
  --namespace streamspace \\
  --create-namespace \\
  --set ingress.enabled=true \\
  --set ingress.host=streamspace.example.com</code></pre>
      </div>

      <h3>Step 3: Install K8s Agent</h3>
      <p>Deploy the K8s Agent to your cluster (connects to Control Plane via WebSocket):</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code># Create RBAC resources
kubectl apply -f agents/k8s-agent/deployments/rbac.yaml

# Deploy agent
kubectl apply -f agents/k8s-agent/deployments/deployment.yaml

# Configure agent to connect to Control Plane
kubectl set env deployment/streamspace-k8s-agent \\
  AGENT_ID=k8s-prod-cluster \\
  CONTROL_PLANE_URL=wss://streamspace.example.com \\
  -n streamspace</code></pre>
      </div>

      <h3>Custom Configuration (Optional)</h3>
      <p>Create a <code>custom-values.yaml</code> file to customize your deployment:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">YAML</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>ingress:
  enabled: true
  host: "streamspace.example.com"
  tls:
    enabled: true
    secretName: "streamspace-tls"

postgresql:
  enabled: true
  auth:
    postgresPassword: "changeme"

api:
  replicaCount: 2

ui:
  replicaCount: 2

k8sAgent:
  enabled: true
  agentId: "k8s-prod-cluster"
  replicas: 1</code></pre>
      </div>

      <p>Install with custom values:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>helm install streamspace ./chart \\
  --namespace streamspace \\
  --create-namespace \\
  --values custom-values.yaml</code></pre>
      </div>

      <h2 id="verify">Verify Deployment</h2>
      <p>Check that all components are running:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code># Check all pods are running
kubectl get pods -n streamspace

# Expected output (v2.0-beta):
# streamspace-api-xxx           1/1     Running
# streamspace-ui-xxx            1/1     Running
# streamspace-k8s-agent-xxx     1/1     Running
# postgresql-xxx                1/1     Running

# Verify agent registered with Control Plane
kubectl logs -n streamspace deploy/streamspace-k8s-agent | grep "Connected to Control Plane"</code></pre>
      </div>

      <h2 id="first-session">Create Your First Session</h2>

      <h3>Access the Web UI</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code># Port forward to UI
kubectl port-forward -n streamspace svc/streamspace-ui 3000:80

# Open in browser
open http://localhost:3000</code></pre>
      </div>

      <h3>Create Session via Web UI</h3>
      <ol>
        <li>Navigate to <strong>Sessions</strong> in the sidebar</li>
        <li>Click <strong>Create Session</strong></li>
        <li>Select an application template (e.g., Firefox Browser)</li>
        <li>Choose your K8s agent from the platform dropdown</li>
        <li>Configure resources (2Gi memory recommended)</li>
        <li>Click <strong>Create</strong></li>
        <li>Wait for session to become <strong>Running</strong></li>
        <li>Click <strong>Connect</strong> to open VNC viewer</li>
      </ol>

      <h3>Or Create Session via API</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>curl -X POST https://streamspace.example.com/api/v1/sessions \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "template_id": "firefox-browser",
    "agent_id": "k8s-prod-cluster",
    "resources": {
      "memory": "2Gi",
      "cpu": "1000m"
    }
  }'</code></pre>
      </div>

      <h3>Check Session Status</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">BASH</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code># List all sessions via API
curl https://streamspace.example.com/api/v1/sessions \\
  -H "Authorization: Bearer YOUR_API_KEY"

# Check session pod on K8s cluster
kubectl get pods -n streamspace -l app=session

# View session logs
kubectl logs -n streamspace -l app=session --tail=100</code></pre>
      </div>

      <h2 id="configuration">Configuration</h2>

      <h3>Configure Agent Settings</h3>
      <p>Customize K8s Agent behavior via environment variables:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">YAML</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>k8sAgent:
  enabled: true
  agentId: "k8s-prod-cluster"
  config:
    sessionNamespace: "streamspace-sessions"
    defaultResources:
      memory: "2Gi"
      cpu: "1000m"
    healthCheckInterval: "30s"</code></pre>
      </div>

      <h3>Configure Storage</h3>
      <p>Set up persistent storage for user home directories:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">YAML</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>storage:
  className: "nfs-client"
  defaultSize: "50Gi"
  accessMode: "ReadWriteMany"</code></pre>
      </div>

      <h3>Enable Monitoring</h3>
      <div class="code-block">
        <div class="code-header">
          <span class="code-lang">YAML</span>
          <button class="copy-button">Copy</button>
        </div>
        <pre><code>monitoring:
  enabled: true
  prometheus:
    enabled: true
    port: 9090
  grafana:
    enabled: true</code></pre>
      </div>

      <h2 id="next-steps">Next Steps</h2>
      <ul>
        <li><a href="docs.html">Read the full documentation</a></li>
        <li><a href="features.html">Explore all features</a></li>
        <li><a href="plugins.html">Learn about the plugin system</a></li>
        <li><a href="https://github.com/streamspace-dev/streamspace/blob/main/docs/V2_DEPLOYMENT_GUIDE.md">v2.0 Deployment Guide</a></li>
        <li><a href="https://github.com/streamspace-dev/streamspace/blob/main/docs/V2_AGENT_GUIDE.md">K8s Agent Operations</a></li>
        <li><a href="https://github.com/streamspace-dev/streamspace/blob/main/ROADMAP.md">Check the roadmap</a></li>
      </ul>

      <h3>Add Application Templates</h3>
      <p>Add templates via the Web UI Admin Portal:</p>
      <ol>
        <li>Navigate to <strong>Admin</strong> â†’ <strong>Templates</strong></li>
        <li>Click <strong>Add Template</strong></li>
        <li>Enter template details (name, category, base image)</li>
        <li>Configure default resources and VNC settings</li>
        <li>Click <strong>Save</strong></li>
      </ol>
      <p>Or sync from a Git repository via API (200+ templates available in <a href="https://github.com/streamspace-dev/streamspace-templates">streamspace-templates</a>).</p>

      <h3>Configure User Quotas</h3>
      <p>Set resource limits per user via the Web UI or API:</p>
      <ul>
        <li>Maximum concurrent sessions</li>
        <li>CPU and memory limits</li>
        <li>Storage quota</li>
        <li>Maximum session duration</li>
      </ul>

      <div class="mt-4">
        <a href="docs.html" class="button button-primary">Full Documentation</a>
        <a href="https://github.com/streamspace-dev/streamspace/issues" class="button button-secondary">Get Help</a>
      </div>
    </main>
  </div>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3>StreamSpace</h3>
        <p>Open source platform for streaming containerized applications to web browsers.</p>
      </div>
      <div class="footer-section">
        <h3>Documentation</h3>
        <ul>
          <li><a href="getting-started.html">Getting Started</a></li>
          <li><a href="docs.html">Documentation</a></li>
          <li><a href="plugins.html">Plugin Development</a></li>
          <li><a href="https://github.com/streamspace-dev/streamspace">GitHub</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Resources</h3>
        <ul>
          <li><a href="features.html">Features</a></li>
          <li><a href="https://github.com/streamspace-dev/streamspace/blob/main/ROADMAP.md">Roadmap</a></li>
          <li><a href="https://github.com/streamspace-dev/streamspace/blob/main/CONTRIBUTING.md">Contributing</a></li>
          <li><a href="https://github.com/streamspace-dev/streamspace/issues">Issues</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Community</h3>
        <ul>
          <li><a href="https://github.com/streamspace-dev/streamspace/discussions">Discussions</a></li>
          <li><a href="https://github.com/streamspace-dev/streamspace">Star on GitHub</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 StreamSpace. Released under MIT License.</p>
    </div>
  </footer>

  <script src="js/main.js"></script>
</body>
</html>
