apiVersion: stream.streamspace.io/v1alpha1
kind: Template
metadata:
  name: vscode
  namespace: streamspace
spec:
  displayName: Visual Studio Code
  description: Modern code editor with IntelliSense, debugging, and Git integration
  category: Development
  icon: https://upload.wikimedia.org/wikipedia/commons/9/9a/Visual_Studio_Code_1.35_icon.svg
  baseImage: lscr.io/linuxserver/code-server:latest

  # VNC configuration
  vnc:
    enabled: true
    port: 8443  # code-server uses 8443
    protocol: websocket
    encryption: false

  # Default resource allocations
  defaultResources:
    requests:
      memory: "2Gi"
      cpu: "1000m"
    limits:
      memory: "4Gi"
      cpu: "2000m"

  # Environment variables
  env:
    - name: PUID
      value: "1000"
    - name: PGID
      value: "1000"
    - name: TZ
      value: "America/New_York"
    - name: PASSWORD
      value: "changeme"  # Default password
    - name: SUDO_PASSWORD
      value: "changeme"

  # Volume mounts
  volumeMounts:
    - name: user-home
      mountPath: /config

  # Capabilities
  capabilities:
    - Network
    - Terminal
    - Git
    - Docker
    - Clipboard

  # Tags
  tags:
    - development
    - ide
    - vscode
    - code-server
    - programming
